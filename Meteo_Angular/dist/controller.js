(()=>{const e=e=>e&&e[0].toUpperCase()+e.slice(1)||"";app.controller("meteovillesController",["$scope","$http",function(t,a){const l=()=>{t.villes=[];for(let a=0;a<localStorage.length;a++)t.villes.push({title:e(localStorage.key(a)),id:localStorage.getItem(localStorage.key(a))});t.villes.forEach((t=>{a.get(`https://api.openweathermap.org/data/2.5/weather?q=${t.title}&APPID=2370a9749f38195f07d3bbefd145b74c&units=metric&lang=fr`).then((a=>{t.data={},t.data.temp=a.data.main.temp,t.data.desc=e(a.data.weather[0].description),t.data.vVent=a.data.wind.speed,t.data.orVent=`wi wi-wind towards-${a.data.wind.deg}-deg`,t.data.meteo=`wi wi-owm-${a.data.weather[0].id}`,t.data.humidite=a.data.main.humidity,t.data.pression=a.data.main.pressure}))}))};l(),t.suppr=function(e){localStorage.removeItem(e.toLowerCase()),l()}}]),app.controller("previsionsController",["$scope","$http","$routeParams",function(t,a,l){let o=[];for(let t=0;t<localStorage.length;t++)o.push({title:e(localStorage.key(t)),id:localStorage.getItem(localStorage.key(t))});t.ville=o.find((e=>e.id.toString()===l.ville)),t.title=t.ville.title,t.ville.data=[],a.get(`https://api.openweathermap.org/geo/1.0/direct?q=${t.ville.title},fr&limit=1&appid=2370a9749f38195f07d3bbefd145b74c`).then((l=>{a.get(`https://api.openweathermap.org/data/2.5/onecall?lat=${l.data[0].lat}&lon=${l.data[0].lon}&exclude=current,minutely,hourly,alerts&appid=2370a9749f38195f07d3bbefd145b74c&units=metric&lang=fr`).then((a=>{a.data.daily.forEach((a=>{t.ville.data.push({date:e(new Intl.DateTimeFormat("fr-FR",{dateStyle:"full"}).format(new Date(1e3*a.dt))),desc:e(a.weather[0].description),meteo:`wi wi-owm-${a.weather[0].id}`,min:a.temp.min,max:a.temp.max})}))}))})).catch((e=>{console.log(e)}))}]),app.controller("villesController",["$scope","$http",function(e,t){e.valid=function(){let a=e.city;a?t.get(`https://api.openweathermap.org/data/2.5/weather?q=${a}&APPID=2370a9749f38195f07d3bbefd145b74c&units=metric&lang=fr`).then((e=>{let t=localStorage.length;localStorage.setItem(a.toLowerCase(),t),window.location="/"})).catch((t=>{console.log(t),e.city="",e.erreur="Erreur : ville inexistante"})):(console.log("Ville inexistante"),e.city="",e.erreur="Erreur : ville inexistante")}}])})();